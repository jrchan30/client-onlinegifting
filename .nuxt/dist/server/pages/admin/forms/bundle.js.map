{"version":3,"file":"pages/admin/forms/bundle.js","sources":["webpack:///./pages/admin/forms/bundle.vue?f431","webpack:///./pages/admin/forms/bundle.vue","webpack:///./pages/admin/forms/bundle.vue?1d57","webpack:///./pages/admin/forms/bundle.vue?2525"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<form enctype=\\\"multipart/form-data\\\">\",\"</form>\",[_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-lg-6\\\"><div class=\\\"card-wrapper\\\"><div class=\\\"card\\\"><div class=\\\"card-header\\\"><h3 class=\\\"mb-0\\\">Input bundle</h3></div> <div class=\\\"card-body\\\"><div class=\\\"row\\\"><div class=\\\"col-md-12\\\"><div class=\\\"form-group\\\"><div class=\\\"input-group input-group-merge\\\"><div class=\\\"input-group-prepend\\\"><span class=\\\"input-group-text\\\"><i class=\\\"fas fa-parachute-box\\\"></i></span></div> <input placeholder=\\\"Bundle name\\\" type=\\\"text\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.bundle_name)))+\" class=\\\"form-control\\\"></div></div> <div class=\\\"form-group\\\"><div class=\\\"input-group input-group-merge\\\"><div class=\\\"input-group-prepend\\\"><span class=\\\"input-group-text\\\"><i class=\\\"fas fa-palette\\\"></i></span></div> <input placeholder=\\\"Colour\\\" type=\\\"text\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.colour)))+\" class=\\\"form-control\\\"></div></div></div></div></div></div></div></div> \"),_vm._ssrNode(\"<div class=\\\"col-lg-6\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-wrapper\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-header\\\"><h3 class=\\\"mb-0\\\">Images</h3></div> \"),_vm._ssrNode(\"<div class=\\\"card-body\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-6 col-md-4 mt-2\\\">\",\"</div>\",[_c('picture-input',{ref:\"pictureInput\",attrs:{\"width\":\"130\",\"height\":\"130\",\"size\":\"1\",\"margin\":\"16\",\"z-index\":10,\"toggle-aspect-ratio\":true,\"button-class\":\"btn mb-0 mt-1\",\"remove-button-class\":\"btn my-0\",\"radius\":\"5\",\"removable\":true,\"custom-strings\":{\n                      upload: '<h1>Bummer!</h1>',\n                      drag: 'Drag an image',\n                      remove: 'Remove',\n                      change: 'Change',\n                    }},on:{\"change\":function($event){return _vm.onChange()}}})],1)])])],2)])]),_vm._ssrNode(\" \"),(!_vm.$fetchState.pending)?_vm._ssrNode(\"<div class=\\\"col-lg-6\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-wrapper\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-header col-12\\\"><h3 class=\\\"mb-0\\\">Categories</h3></div> \"),_vm._ssrNode(\"<div class=\\\"card-body\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-md-12\\\">\",\"</div>\",[_c('v-select',{staticStyle:{},attrs:{\"multiple\":\"\",\"label\":\"name\",\"required\":\"\",\"reduce\":function (name) { return name.id; },\"options\":_vm.CATEGORIES},model:{value:(_vm.form.categories),callback:function ($$v) {_vm.$set(_vm.form, \"categories\", $$v)},expression:\"form.categories\"}})],1)])])],2)])]):_vm._e(),_vm._ssrNode(\" \"),(!_vm.$fetchState.pending)?_vm._ssrNode(\"<div class=\\\"col-lg-6\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-wrapper\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-header\\\"><h3 class=\\\"mb-0\\\">Products to be included</h3></div> \"),_vm._ssrNode(\"<div class=\\\"card-body\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-md-12\\\">\",\"</div>\",[_c('v-select',{staticStyle:{},attrs:{\"multiple\":\"\",\"label\":\"name\",\"required\":\"\",\"reduce\":function (name) { return name.id; },\"options\":_vm.ALL_PRODUCTS},model:{value:(_vm.form.products),callback:function ($$v) {_vm.$set(_vm.form, \"products\", $$v)},expression:\"form.products\"}})],1)])])],2)])]):_vm._e(),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"col-lg-12\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-wrapper\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-header\\\"><h3 class=\\\"mb-0\\\">Bundle description</h3></div> \"),_vm._ssrNode(\"<div class=\\\"card-body\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-md-12\\\">\",\"</div>\",[_c('editor-menu-bar',{attrs:{\"editor\":_vm.editor},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n                    var commands = ref.commands;\n                    var isActive = ref.isActive;\nreturn [_c('div',[_c('button',{staticClass:\"btn px-1 py-0\",class:{ 'is-active': isActive.bold() },attrs:{\"type\":\"button\"},on:{\"click\":commands.bold}},[_c('i',{staticClass:\"fas fa-bold\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",class:{ 'is-active': isActive.italic() },attrs:{\"type\":\"button\"},on:{\"click\":commands.italic}},[_c('i',{staticClass:\"fas fa-italic\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",class:{ 'is-active': isActive.strike() },attrs:{\"type\":\"button\"},on:{\"click\":commands.strike}},[_c('i',{staticClass:\"fas fa-strikethrough\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",class:{ 'is-active': isActive.underline() },on:{\"click\":commands.underline}},[_c('i',{staticClass:\"fas fa-underline\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",class:{ 'is-active': isActive.bullet_list() },attrs:{\"type\":\"button\"},on:{\"click\":commands.bullet_list}},[_c('i',{staticClass:\"fas fa-list-ul\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",class:{ 'is-active': isActive.ordered_list() },attrs:{\"type\":\"button\"},on:{\"click\":commands.ordered_list}},[_c('i',{staticClass:\"fas fa-list-ol\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",attrs:{\"type\":\"button\"},on:{\"click\":commands.undo}},[_c('i',{staticClass:\"fas fa-undo-alt\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",attrs:{\"type\":\"button\"},on:{\"click\":commands.redo}},[_c('i',{staticClass:\"fas fa-redo\"})])])]}}])}),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"border-danger p-2\\\">\",\"</div>\",[_c('editor-content',{staticClass:\"editor__content border-1\",attrs:{\"editor\":_vm.editor}}),_vm._ssrNode(\" <input type=\\\"hidden\\\" name=\\\"content\\\"\"+(_vm._ssrAttr(\"value\",_vm.editor))+\">\")],2)],2)])])],2)])])],2),_vm._ssrNode(\" <button type=\\\"submit\\\"\"+(_vm._ssrAttr(\"disabled\",_vm.loading))+\" class=\\\"btn btn-info btn-lg btn-block\\\">\"+((_vm.loading)?(\"<i class=\\\"fas fa-spinner fa-spin\\\"></i>\"):\"<!---->\")+\"\\n      Submit\\n    </button>\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport { Editor } from 'tiptap'\r\nimport {\r\n  OrderedList,\r\n  BulletList,\r\n  ListItem,\r\n  Bold,\r\n  Italic,\r\n  Link,\r\n  Strike,\r\n  Underline,\r\n  History,\r\n} from 'tiptap-extensions'\r\n\r\nexport default {\r\n  layout: 'admin',\r\n  middleware: ['auth', 'admin-only'],\r\n  async fetch() {\r\n    await this.GET_CATEGORIES()\r\n    await this.GET_ALL_PRODUCTS()\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        bundle_name: '',\r\n        description: '',\r\n        image: '',\r\n        colour: '',\r\n        products: [],\r\n        categories: [],\r\n      },\r\n      editor: null,\r\n      loading: false,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      CATEGORIES: 'categories/CATEGORIES',\r\n      ALL_PRODUCTS: 'products/ALL_PRODUCTS',\r\n    }),\r\n  },\r\n  beforeDestroy() {\r\n    if (this.editor) {\r\n      this.editor.destroy()\r\n    }\r\n  },\r\n\r\n  beforeMount() {\r\n    this.editor = new Editor({\r\n      content: '<p>Product description goes here!</p>',\r\n      extensions: [\r\n        new BulletList(),\r\n        new ListItem(),\r\n        new OrderedList(),\r\n        new Link(),\r\n        new Bold(),\r\n        new Italic(),\r\n        new Strike(),\r\n        new Underline(),\r\n        new History(),\r\n      ],\r\n      onUpdate: ({ getJSON, getHTML }) => {\r\n        this.json = getJSON()\r\n        this.html = getHTML()\r\n        this.form.description = this.html\r\n      },\r\n    })\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions({\r\n      GET_CATEGORIES: 'categories/GET_CATEGORIES',\r\n      GET_ALL_PRODUCTS: 'products/GET_ALL_PRODUCTS',\r\n    }),\r\n    closeForm() {\r\n      Object.assign(this.$data, this.$options.data())\r\n    },\r\n    onChange() {\r\n      const file = this.$refs.pictureInput.file\r\n      if (file) {\r\n        this.form.image = file\r\n      } else {\r\n        alert(\r\n          'Old browser (not supported). Chrome latest updated browser is suggested'\r\n        )\r\n      }\r\n    },\r\n    onRemoved() {\r\n      this.image = ''\r\n    },\r\n    submit() {\r\n      this.errors = {}\r\n      this.$swal({\r\n        title: 'Are you sure?',\r\n        text: 'Please recheck before inserting',\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Yes, insert it!',\r\n      }).then(async (result) => {\r\n        if (result.isConfirmed) {\r\n          this.loading = true\r\n\r\n          const form = {\r\n            name: this.form.bundle_name,\r\n            description: this.form.description,\r\n            colour: this.form.colour,\r\n          }\r\n\r\n          const formData = new FormData()\r\n          for (const x in form) {\r\n            formData.append(x, form[x])\r\n          }\r\n\r\n          for (const y in this.form.categories) {\r\n            formData.append('categories[]', this.form.categories[y])\r\n          }\r\n\r\n          for (const z in this.form.products) {\r\n            formData.append('products[]', this.form.products[z])\r\n          }\r\n\r\n          formData.append('image', this.form.image)\r\n\r\n          try {\r\n            await this.$axios.$post('/bundles', formData)\r\n            this.$swal('Inserted!', 'Bundle has been inserted.', 'success')\r\n            this.closeForm()\r\n          } catch (e) {\r\n            this.$swal({\r\n              icon: 'error',\r\n              title: 'Oops...',\r\n              text: e.response.data?.message,\r\n            })\r\n          } finally {\r\n            this.loading = false\r\n          }\r\n        }\r\n      })\r\n    },\r\n  },\r\n}\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bundle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bundle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./bundle.vue?vue&type=template&id=3a5e8dbc&\"\nimport script from \"./bundle.vue?vue&type=script&lang=js&\"\nexport * from \"./bundle.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"177dc4c3\"\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {Form: require('C:\\\\Users\\\\Russell Chan\\\\Desktop\\\\online-gifting-client\\\\components\\\\Admin\\\\Form.vue').default})\n"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAYA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAVA;AAYA;AACA;AAAA;AAEA;AACA;AAFA;AADA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAWA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAjBA;AAmBA;AACA;AACA;AAEA;AACA;AAFA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AAEA;AACA;AACA;AACA;AAHA;AAMA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAxEA;AAvDA;;ACpRA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}