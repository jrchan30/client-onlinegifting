{"version":3,"file":"pages/admin/forms/product.js","sources":["webpack:///./pages/admin/forms/product.vue?d4fc","webpack:///./pages/admin/forms/product.vue","webpack:///./pages/admin/forms/product.vue?6bb5","webpack:///./pages/admin/forms/product.vue?4928"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<form>\",\"</form>\",[_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-lg-6\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-wrapper\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-header\\\"><h3 class=\\\"mb-0\\\">Input product</h3></div> \"),_vm._ssrNode(\"<div class=\\\"card-body\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode((_vm._ssrList((_vm.fields),function(field,index){return (\"<div\"+(_vm._ssrClass(null,field.class))+\"><div class=\\\"form-group\\\"><div class=\\\"input-group input-group-merge\\\"><div class=\\\"input-group-prepend\\\"><span class=\\\"input-group-text\\\"><i\"+(_vm._ssrClass(null,field.icon))+\"></i></span></div> \"+(((field.type)==='checkbox')?(\"<input\"+(_vm._ssrAttr(\"placeholder\",field.placeholder))+\" type=\\\"checkbox\\\"\"+(_vm._ssrAttr(\"checked\",Array.isArray(field.value)?_vm._i(field.value,null)>-1:(field.value)))+\" class=\\\"form-control\\\">\"):((field.type)==='radio')?(\"<input\"+(_vm._ssrAttr(\"placeholder\",field.placeholder))+\" type=\\\"radio\\\"\"+(_vm._ssrAttr(\"checked\",_vm._q(field.value,null)))+\" class=\\\"form-control\\\">\"):(\"<input\"+(_vm._ssrAttr(\"placeholder\",field.placeholder))+(_vm._ssrAttr(\"type\",field.type))+(_vm._ssrAttr(\"value\",(field.value)))+\" class=\\\"form-control\\\">\"))+\" \"+((field.appendable)?(\"<div class=\\\"input-group-append\\\"><span class=\\\"input-group-text\\\"><small class=\\\"font-weight-bold\\\">\"+_vm._ssrEscape(_vm._s(field.appendable_value))+\"</small></span></div>\"):\"<!---->\")+\"</div></div></div>\")}))+\" <div class=\\\"card-header col-12\\\"><h3 class=\\\"mb-0\\\">Categories</h3></div> \"),_vm._ssrNode(\"<div class=\\\"card-body\\\">\",\"</div>\",[_c('v-select',{staticStyle:{},attrs:{\"multiple\":\"\",\"label\":\"name\",\"required\":\"\",\"reduce\":function (name) { return name.id; },\"options\":_vm.SUB_CATEGORIES},model:{value:(_vm.categories),callback:function ($$v) {_vm.categories=$$v},expression:\"categories\"}})],1)],2)])],2)])]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"col-lg-6\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-wrapper\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-header\\\"><h3 class=\\\"mb-0\\\">Images</h3></div> \"),_vm._ssrNode(\"<div class=\\\"card-body\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",_vm._l((_vm.images),function(image,index){return _vm._ssrNode(\"<div class=\\\"col-6 col-md-4 mt-2\\\">\",\"</div>\",[_c('picture-input',{ref:\"pictureInput\",refInFor:true,attrs:{\"width\":\"130\",\"height\":\"130\",\"size\":\"3\",\"margin\":\"16\",\"z-index\":10,\"button-class\":\"btn mb-0 mt-1\",\"remove-button-class\":\"btn my-0\",\"radius\":\"5\",\"removable\":true,\"custom-strings\":{\n                      upload: '<h1>Bummer!</h1>',\n                      drag: 'Drag an image',\n                      remove: 'Remove',\n                      change: 'Change',\n                    }},on:{\"change\":function($event){return _vm.onChange(index)}}})],1)}),0),_vm._ssrNode(\" <button type=\\\"button\\\" class=\\\"btn btn-primary btn-lg btn-block mt-3\\\">\\n                Add Image\\n              </button>\")],2)],2)])]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"col-lg-12\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-wrapper\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-header\\\"><h3 class=\\\"mb-0\\\">Product Description</h3></div> \"),_vm._ssrNode(\"<div class=\\\"card-body\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-md-12\\\">\",\"</div>\",[_c('editor-menu-bar',{attrs:{\"editor\":_vm.editor},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n                    var commands = ref.commands;\n                    var isActive = ref.isActive;\nreturn [_c('div',[_c('button',{staticClass:\"btn px-1 py-0\",class:{ 'is-active': isActive.bold() },attrs:{\"type\":\"button\"},on:{\"click\":commands.bold}},[_c('i',{staticClass:\"fas fa-bold\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",class:{ 'is-active': isActive.italic() },attrs:{\"type\":\"button\"},on:{\"click\":commands.italic}},[_c('i',{staticClass:\"fas fa-italic\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",class:{ 'is-active': isActive.strike() },attrs:{\"type\":\"button\"},on:{\"click\":commands.strike}},[_c('i',{staticClass:\"fas fa-strikethrough\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",class:{ 'is-active': isActive.underline() },on:{\"click\":commands.underline}},[_c('i',{staticClass:\"fas fa-underline\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",class:{ 'is-active': isActive.bullet_list() },attrs:{\"type\":\"button\"},on:{\"click\":commands.bullet_list}},[_c('i',{staticClass:\"fas fa-list-ul\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",class:{ 'is-active': isActive.ordered_list() },attrs:{\"type\":\"button\"},on:{\"click\":commands.ordered_list}},[_c('i',{staticClass:\"fas fa-list-ol\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",attrs:{\"type\":\"button\"},on:{\"click\":commands.undo}},[_c('i',{staticClass:\"fas fa-undo-alt\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn px-1 py-0\",attrs:{\"type\":\"button\"},on:{\"click\":commands.redo}},[_c('i',{staticClass:\"fas fa-redo\"})])])]}}])}),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"border-danger p-2\\\">\",\"</div>\",[_c('editor-content',{staticClass:\"editor__content border-1\",attrs:{\"editor\":_vm.editor}}),_vm._ssrNode(\" <input type=\\\"hidden\\\" name=\\\"content\\\"\"+(_vm._ssrAttr(\"value\",_vm.editor))+\">\")],2)],2)])])],2)])]),_vm._ssrNode(\" <button type=\\\"submit\\\"\"+(_vm._ssrAttr(\"disabled\",_vm.loading))+\" class=\\\"btn btn-info btn-lg btn-block\\\">\"+((_vm.loading)?(\"<i class=\\\"fas fa-spinner fa-spin\\\"></i>\"):\"<!---->\")+\"\\n        Submit\\n      </button>\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport { Editor } from 'tiptap'\r\nimport {\r\n  OrderedList,\r\n  BulletList,\r\n  ListItem,\r\n  Bold,\r\n  Italic,\r\n  Link,\r\n  Strike,\r\n  Underline,\r\n  History,\r\n} from 'tiptap-extensions'\r\n\r\nexport default {\r\n  layout: 'admin',\r\n  middleware: ['auth', 'admin-only'],\r\n  async fetch() {\r\n    await this.GET_CATEGORIES()\r\n  },\r\n  data() {\r\n    return {\r\n      fields: {\r\n        name: {\r\n          class: 'col-md-6',\r\n          placeholder: 'Product name',\r\n          icon: 'fas fa-signature',\r\n          appendable: false,\r\n          type: 'text',\r\n          value: '',\r\n        },\r\n        price: {\r\n          placeholder: 'Price',\r\n          class: 'col-md-6',\r\n          icon: 'fas fa-credit-card',\r\n          appendable: true,\r\n          appendable_value: 'IDR',\r\n          type: 'number',\r\n          value: 0,\r\n        },\r\n        weight: {\r\n          class: 'col-md-6',\r\n          placeholder: 'Weight',\r\n          icon: 'fas fa-weight-hanging',\r\n          appendable: true,\r\n          appendable_value: 'gr',\r\n          type: 'number',\r\n          value: 100,\r\n        },\r\n        stock: {\r\n          class: 'col-md-6',\r\n          placeholder: 'Stock',\r\n          icon: 'fas fa-cubes',\r\n          appendable: false,\r\n          type: 'number',\r\n          value: 0,\r\n        },\r\n        // description: {\r\n        //   class: 'col-md-12',\r\n        //   placeholder: 'Description',\r\n        //   icon: 'fas fa-align-left',\r\n        //   appendable: false,\r\n        //   type: 'text',\r\n        //   value: '',\r\n        // },\r\n      },\r\n      images: [],\r\n      categories: [],\r\n      editor: null,\r\n      description: '',\r\n      loading: false,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters({\r\n      CATEGORIES: 'categories/CATEGORIES',\r\n      SUB_CATEGORIES: 'categories/SUB_CATEGORIES',\r\n    }),\r\n  },\r\n\r\n  beforeDestroy() {\r\n    if (this.editor) {\r\n      this.editor.destroy()\r\n    }\r\n  },\r\n\r\n  beforeMount() {\r\n    this.editor = new Editor({\r\n      content: '<p>Product description goes here!</p>',\r\n      extensions: [\r\n        new BulletList(),\r\n        new ListItem(),\r\n        new OrderedList(),\r\n        new Link(),\r\n        new Bold(),\r\n        new Italic(),\r\n        new Strike(),\r\n        new Underline(),\r\n        new History(),\r\n      ],\r\n      onUpdate: ({ getJSON, getHTML }) => {\r\n        this.json = getJSON()\r\n        this.html = getHTML()\r\n        this.description = this.html\r\n      },\r\n    })\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions({\r\n      GET_CATEGORIES: 'categories/GET_CATEGORIES',\r\n    }),\r\n    closeForm() {\r\n      Object.assign(this.$data, this.$options.data())\r\n    },\r\n    onChange(idx) {\r\n      const file = this.$refs.pictureInput[idx].file\r\n      if (file) {\r\n        this.images[idx] = file\r\n      } else {\r\n        console.log('Old browser. No support for Filereader API')\r\n      }\r\n    },\r\n    addImage() {\r\n      this.images.push({\r\n        id: null,\r\n        path: '',\r\n        url: '',\r\n      })\r\n    },\r\n    submit() {\r\n      this.$swal({\r\n        title: 'Are you sure?',\r\n        text: 'Please recheck before inserting',\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Yes, insert it!',\r\n      }).then(async (result) => {\r\n        if (result.isConfirmed) {\r\n          this.loading = true\r\n          const form = {\r\n            name: this.fields.name.value,\r\n            description: this.description,\r\n            price: this.fields.price.value,\r\n            stock: this.fields.stock.value,\r\n            weight: this.fields.weight.value,\r\n          }\r\n\r\n          const formData = new FormData()\r\n          for (const x in form) {\r\n            formData.append(x, form[x])\r\n          }\r\n\r\n          for (const y in this.categories) {\r\n            formData.append('categories[]', this.categories[y])\r\n          }\r\n\r\n          for (const z in this.images) {\r\n            formData.append('images[]', this.images[z])\r\n          }\r\n\r\n          try {\r\n            await this.$axios.$post('/products', formData)\r\n            this.$swal('Inserted!', 'Product has been inserted.', 'success')\r\n            this.editor.destroy()\r\n            this.closeForm()\r\n            this.editor = new Editor({\r\n              content: '<p>Product description goes here!</p>',\r\n              extensions: [\r\n                new BulletList(),\r\n                new ListItem(),\r\n                new OrderedList(),\r\n                new Link(),\r\n                new Bold(),\r\n                new Italic(),\r\n                new Strike(),\r\n                new Underline(),\r\n                new History(),\r\n              ],\r\n              onUpdate: ({ getJSON, getHTML }) => {\r\n                this.json = getJSON()\r\n                this.html = getHTML()\r\n                this.description = this.html\r\n              },\r\n            })\r\n          } catch (e) {\r\n            this.$swal({\r\n              icon: 'error',\r\n              title: 'Oops...',\r\n              text: e.response.data?.message,\r\n            })\r\n          } finally {\r\n            this.loading = false\r\n          }\r\n        }\r\n      })\r\n    },\r\n  },\r\n}\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./product.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./product.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./product.vue?vue&type=template&id=58010eb2&\"\nimport script from \"./product.vue?vue&type=script&lang=js&\"\nexport * from \"./product.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"dee65b04\"\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {Form: require('C:\\\\Users\\\\Russell Chan\\\\Desktop\\\\online-gifting-client\\\\components\\\\Admin\\\\Form.vue').default})\n"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAYA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3CA;AA4CA;AACA;AACA;AACA;AACA;AAjDA;AAmDA;AACA;AACA;AAEA;AACA;AAFA;AADA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAWA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAjBA;AAmBA;AACA;AACA;AAEA;AADA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAWA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAjBA;AAmBA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AA3FA;AA/FA;;AChPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}