(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{280:function(t,e,r){"use strict";r.r(e);r(12);var n=r(4),c={name:"AdminPagination",props:{storeAction:{type:String,default:""},storeGetter:{type:String,default:""}},data:function(){return{current_page:1,last_page:"",loading:!1}},computed:{currentObject:function(){return this.$store.getters["".concat(this.storeGetter)]}},methods:{changePage:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!0!==e.loading){r.next=2;break}return r.abrupt("return",!1);case 2:e.loading=!0,r.t0=t,r.next="next"===r.t0?6:"prev"===r.t0?8:"first"===r.t0?10:"last"===r.t0?12:14;break;case 6:return e.current_page++,r.abrupt("break",15);case 8:return e.current_page--,r.abrupt("break",15);case 10:return e.current_page=1,r.abrupt("break",15);case 12:return e.current_page=e.currentObject.meta.last_page,r.abrupt("break",15);case 14:return r.abrupt("break",15);case 15:return r.next=17,e.$store.dispatch(e.storeAction,e.current_page);case 17:setTimeout((function(){e.loading=!1}),2e3);case 18:case"end":return r.stop()}}),r)})))()}}},o=r(8),component=Object(o.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.currentObject.meta?r("nav",{attrs:{"aria-label":"..."}},[r("ul",{staticClass:"pagination justify-content-end mb-0"},[r("li",{staticClass:"page-item",class:{disabled:!t.currentObject.links.prev}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)",tabindex:"-1"},on:{click:function(e){return t.changePage("prev")}}},[r("i",{staticClass:"fas fa-angle-left"}),t._v(" "),r("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._v(" "),1!==t.currentObject.meta.current_page?r("li",{staticClass:"page-item",on:{click:function(e){return t.changePage("first")}}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"}},[t._v("1")])]):t._e(),t._v(" "),r("li",{staticClass:"page-item active",staticStyle:{"pointer-events":"none"}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)",disabled:""}},[t._v(t._s(t.current_page)+" "),r("span",{staticClass:"sr-only"},[t._v("(current)")])])]),t._v(" "),t.currentObject.meta.last_page!==t.current_page?r("li",{staticClass:"page-item",on:{click:function(e){return t.changePage("last")}}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.currentObject.meta.last_page))])]):t._e(),t._v(" "),r("li",{staticClass:"page-item",class:{disabled:!t.currentObject.links.next}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.changePage("next")}}},[r("i",{staticClass:"fas fa-angle-right"}),t._v(" "),r("span",{staticClass:"sr-only"},[t._v("Next")])])])])]):t._e()}),[],!1,null,null,null);e.default=component.exports},433:function(t,e,r){var content=r(457);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(24).default)("e50a0b1c",content,!0,{sourceMap:!1})},456:function(t,e,r){"use strict";r(433)},457:function(t,e,r){(e=r(23)(!1)).push([t.i,".item-image[data-v-79892888],.item-image-bottom[data-v-79892888]{border-radius:10px;cursor:pointer}.item-image-bottom[data-v-79892888]{transition:transform .4s}.item-image-bottom[data-v-79892888]:hover{transform:scale(1.1)}",""]),t.exports=e},490:function(t,e,r){"use strict";r.r(e);r(62),r(27),r(16),r(28),r(15),r(53),r(73),r(89),r(12);var n=r(4),c=r(29),o=r(38);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={layout:"admin",middleware:["auth","admin-only"],data:function(){return{isEdit:!1,currentProductName:"",product_form_id:"",fields:{name:{class:"col-md-6",placeholder:"Product name",icon:"fas fa-signature",appendable:!1,value:""},price:{placeholder:"Price",class:"col-md-6",icon:"fas fa-credit-card",appendable:!0,appendable_value:"IDR",value:0},weight:{class:"col-md-6",placeholder:"Weight",icon:"fas fa-weight-hanging",appendable:!0,appendable_value:"gr",value:100},stock:{class:"col-md-6",placeholder:"Stock",icon:"fas fa-cubes",appendable:!1,value:0},description:{class:"col-md-12",placeholder:"Description",icon:"fas fa-align-left",appendable:!1,value:""}},categories:[],images:[],new_images:{},delete_image:[],filter:{search:"",orderBy:"created_at",orderDir:"desc"},isHiddenProducts:!1,loading:!1}},computed:d({},Object(o.c)({PRODUCTS:"products/PRODUCTS",CATEGORIES:"categories/CATEGORIES"})),mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.GET_PRODUCTS();case 2:return e.next=4,t.GET_CATEGORIES();case 4:case"end":return e.stop()}}),e)})))()},methods:d(d(d({},Object(o.b)({GET_PRODUCTS:"products/GET_PRODUCTS",GET_CATEGORIES:"categories/GET_CATEGORIES",GET_HIDDEN_PRODUCTS:"products/GET_HIDDEN_PRODUCTS"})),Object(o.d)({SET_FILTER:"products/SET_FILTER"})),{},{getProducts:function(){this.isHiddenProducts=!1,this.GET_PRODUCTS()},getHiddenProducts:function(){this.isHiddenProducts=!0,this.GET_HIDDEN_PRODUCTS()},settingFilter:function(t){switch(t){case"id":if("id"!==this.filter.orderBy)this.filter.orderDir="desc";else{var e="desc"===this.filter.orderDir?"asc":"desc";this.filter.orderDir=e}this.filter.orderBy="id";break;case"name":if("name"!==this.filter.orderBy)this.filter.orderDir="desc";else{var r="desc"===this.filter.orderDir?"asc":"desc";this.filter.orderDir=r}this.filter.orderBy="name";break;case"price":if("price"!==this.filter.orderBy)this.filter.orderDir="desc";else{var n="desc"===this.filter.orderDir?"asc":"desc";this.filter.orderDir=n}this.filter.orderBy="price";break;case"stock":if("stock"!==this.filter.orderBy)this.filter.orderDir="desc";else{var c="desc"===this.filter.orderDir?"asc":"desc";this.filter.orderDir=c}this.filter.orderBy="stock"}this.SET_FILTER(this.filter),this.isHiddenProducts?this.GET_HIDDEN_PRODUCTS():this.GET_PRODUCTS()},onChange:function(t,e){var r=this.$refs.pictureInput[t].file;r&&(this.new_images[t]=r,!this.delete_image.includes(e)&&e&&this.delete_image.push(e))},imageUrl:function(){return this.uploadedFile},onRemove:function(t,e){Object.keys(this.new_images).indexOf("".concat(t))>-1?delete this.new_images[t]:!this.delete_image.includes(e)&&e&&this.delete_image.push(e)},addImage:function(){this.images.push({id:null,path:"",url:""})},expandImage:function(t){this.$swal({showCloseButton:!0,imageUrl:t,width:1e3,showConfirmButton:!1,imageWidth:"100%",imageAlt:"Image Not Available"})},toggleEdit:function(t){var e=this;this.closeForm();var r=JSON.parse(JSON.stringify(t));this.isEdit=!0,this.product_form_id=r.id,this.fields.name.value=r.name,this.fields.price.value=r.price,this.fields.weight.value=r.weight,this.fields.stock.value=r.stock,this.fields.description.value=r.description,this.images=r.images,r.categories.map((function(t){return e.categories.push(t.id)})),this.currentProductName=r.name,document.getElementById("edit").scrollIntoView()},closeForm:function(){this.isEdit=!1,Object.assign(this.$data,this.$options.data())},hideProduct:function(t){var e=this;this.loading=!1,this.$swal({title:"Are you sure?",text:"Product will be hidden from customers",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, hide it!"}).then(function(){var r=Object(n.a)(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.isConfirmed){r.next=5;break}return r.next=3,e.$axios.$delete("/products/".concat(t));case 3:e.$swal("Hid!","Product is now hidden.","success"),e.GET_PRODUCTS();case 5:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}())},restoreProduct:function(t){var e=this;this.loading=!0,this.$swal({title:"Are you sure?",text:"Product will be visible to customers",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, restore it!"}).then(function(){var r=Object(n.a)(regeneratorRuntime.mark((function r(n){var c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.isConfirmed){r.next=14;break}return r.prev=1,r.next=4,e.$axios.$post("/restore-product/".concat(t));case 4:e.$swal("Restored!","Product is restored.","success"),e.GET_HIDDEN_PRODUCTS(),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),e.$swal({icon:"error",title:"Oops...",text:null===(c=r.t0.response.data)||void 0===c?void 0:c.message});case 11:return r.prev=11,e.loading=!1,r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[1,8,11,14]])})));return function(t){return r.apply(this,arguments)}}())},submitEdit:function(){var t=this;this.$swal({title:"Are you sure?",text:"Please recheck before saving",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){var form,n,c,o,a,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isConfirmed){e.next=19;break}for(c in form={name:t.fields.name.value,description:t.fields.description.value,price:t.fields.price.value,stock:t.fields.stock.value,weight:t.fields.weight.value},n=new FormData,form)n.append(c,form[c]);for(o in t.categories)n.append("categories[]",t.categories[o]);if(Object.keys(t.new_images).length>0)for(a in t.new_images)n.append("new_images[]",t.new_images[a]);if(t.delete_image.length>0)for(b in t.delete_image)n.append("delete_image[]",t.delete_image[b]);return n.append("_method","patch"),e.prev=8,e.next=11,t.$axios.$post("/products/".concat(t.product_form_id),n);case 11:t.$swal("Saved!","Product has been edited.","success"),t.closeForm(),t.GET_PRODUCTS(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),t.$swal({icon:"error",title:"Oops...",text:"Something went wrong!"});case 19:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(t){return e.apply(this,arguments)}}())}})},m=(r(456),r(8)),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"card"},[t._m(0),t._v(" "),r("div",{staticClass:"nav-wrapper px-2 ml-3"},[r("ul",{staticClass:"nav nav-pills flex-column flex-md-row",attrs:{id:"tabs-icons-text",role:"tablist"}},[r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link mb-sm-3 mb-md-0 active",attrs:{id:"tabs-icons-text-1-tab","data-toggle":"tab",href:"#tabs-icons-text-1",role:"tab","aria-controls":"tabs-icons-text-1","aria-selected":"true"},on:{click:function(e){return t.getProducts()}}},[r("i",{staticClass:"fas fa-boxes mr-2"}),t._v("Products")])]),t._v(" "),r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link mb-sm-3 mb-md-0",attrs:{id:"tabs-icons-text-2-tab","data-toggle":"tab",href:"#tabs-icons-text-2",role:"tab","aria-controls":"tabs-icons-text-2","aria-selected":"false"},on:{click:function(e){return t.getHiddenProducts()}}},[r("i",{staticClass:"fas fa-trash-alt mr-2"}),t._v("Hidden Products")])])])]),t._v(" "),r("div",{staticClass:"table-responsive",attrs:{"data-toggle":"list","data-list-values":'["id", "name", "price", "stock", "weight"]'}},[r("table",{staticClass:"table align-items-center table-flush"},[r("thead",{staticClass:"thead-light"},[r("tr",[r("th",{staticClass:"sort",attrs:{scope:"col","data-sort":"id"},on:{click:function(e){return t.settingFilter("id")}}},[t._v("\n                Id\n              ")]),t._v(" "),r("th",{staticClass:"sort",attrs:{scope:"col","data-sort":"name"},on:{click:function(e){return t.settingFilter("name")}}},[t._v("\n                Product Name\n              ")]),t._v(" "),r("th",{staticClass:"sort",attrs:{scope:"col","data-sort":"price"},on:{click:function(e){return t.settingFilter("price")}}},[t._v("\n                Price\n              ")]),t._v(" "),r("th",{staticClass:"sort",attrs:{scope:"col","data-sort":"status"},on:{click:function(e){return t.settingFilter("stock")}}},[t._v("\n                Status (Stock)\n              ")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Image")]),t._v(" "),r("th",{staticClass:"sort",attrs:{scope:"col"}},[t._v("Rating")]),t._v(" "),r("th",{staticClass:"sort",attrs:{scope:"col"}},[t._v("Likes")]),t._v(" "),r("th",{attrs:{scope:"col"}})])]),t._v(" "),r("tbody",{staticClass:"list"},t._l(t.PRODUCTS.data,(function(e){return r("tr",{key:e.id},[r("td",{staticClass:"id"},[t._v(t._s(e.id))]),t._v(" "),r("th",{staticClass:"name"},[r("span",{staticClass:"text-capitalize"},[t._v(t._s(e.name))])]),t._v(" "),r("td",{staticClass:"price"},[t._v(t._s(e.price)+" (IDR)")]),t._v(" "),r("td",[r("span",{staticClass:"badge badge-dot mr-4"},[e.stock>0&&!e.deleted_at?[r("i",{staticClass:"bg-success"}),t._v(" "),r("span",{staticClass:"status"},[t._v("Available ("+t._s(e.stock)+")")])]:0==e.stock?[r("i",{staticClass:"bg-gray"}),t._v(" "),r("span",{staticClass:"status text-gray"},[t._v("Out of Stock")])]:[r("i",{staticClass:"bg-red"}),t._v(" "),r("span",{staticClass:"status text-danger"},[t._v("Deleted ("+t._s(e.stock)+")")])]],2)]),t._v(" "),r("td",[r("img",{staticClass:"item-image",attrs:{alt:"Image placeholder",src:e.main_image,width:"80px"},on:{click:function(r){return t.expandImage(""+e.main_image)}}})]),t._v(" "),r("td",{staticClass:"rating"},[null==e.avg_rating?r("span",[t._v("Not rated")]):t._e(),t._v(t._s(e.avg_rating)+"\n              ")]),t._v(" "),r("td",{staticClass:"likes"},[t._v("\n                "+t._s(e.likes_count)+"\n              ")]),t._v(" "),r("td",{staticClass:"text-right"},[r("div",{staticClass:"dropdown"},[t._m(1,!0),t._v(" "),r("div",{staticClass:"dropdown-menu dropdown-menu-right dropdown-menu-arrow"},[t.isHiddenProducts?[r("button",{staticClass:"dropdown-item",on:{click:function(r){return t.restoreProduct(e.id)}}},[t._v("\n                        Restore\n                      ")])]:[r("button",{staticClass:"dropdown-item",on:{click:function(r){return t.toggleEdit(e)}}},[t._v("\n                        Edit\n                      ")]),t._v(" "),r("button",{staticClass:"dropdown-item",on:{click:function(r){return t.hideProduct(e.id)}}},[t._v("\n                        Hide\n                      ")])]],2)])])])})),0)])]),t._v(" "),r("div",{staticClass:"card-footer py-4"},[r("AdminPagination",{attrs:{"store-action":"products/GET_PRODUCTS","store-getter":"products/PRODUCTS"}})],1)]),t._v(" "),r("div",{staticClass:"card",attrs:{id:"edit"}},[r("div",{staticClass:"card-header border-0"},[t.isEdit?[r("h3",{staticClass:"mb-0 text-capitalize"},[t._v("\n            Edit Product ("+t._s(t.currentProductName)+")\n            "),r("button",{staticClass:"btn p-0 float-right fas fa-times",on:{click:t.closeForm}})]),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.submitEdit(e)},keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}}},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[t._l(t.images,(function(image,e){return r("div",{key:e,staticClass:"col-3"},[r("picture-input",{ref:"pictureInput",refInFor:!0,attrs:{width:"130",height:"130",size:"10",margin:"16","button-class":"btn btn-sm",radius:"5","z-index":10,removable:!0,prefill:image.url,"custom-strings":{upload:"<h1>Bummer!</h1>",drag:"Drag an image"}},on:{change:function(r){return t.onChange(e,image.id)},remove:function(r){return t.onRemove(e,image.id)}}})],1)})),t._v(" "),r("div",{staticClass:"col-3 text-center"},[r("button",{staticClass:"btn my-auto bg-transparent",attrs:{type:"button"},on:{click:t.addImage}},[r("i",{staticClass:"far fa-plus-square fa-4x"})])])],2),t._v(" "),r("div",{staticClass:"row"},[t._l(t.fields,(function(e,n){return r("div",{key:n,class:e.class},[r("div",{staticClass:"form-group"},[r("div",{staticClass:"input-group input-group-merge"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[r("i",{class:e.icon})])]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"field.value"}],staticClass:"form-control",attrs:{placeholder:e.placeholder,type:"text"},domProps:{value:e.value},on:{input:function(r){r.target.composing||t.$set(e,"value",r.target.value)}}}),t._v(" "),e.appendable?[r("div",{staticClass:"input-group-append"},[r("span",{staticClass:"input-group-text"},[r("small",{staticClass:"font-weight-bold"},[t._v(t._s(e.appendable_value))])])])]:t._e()],2)])])})),t._v(" "),r("div",{staticClass:"col-md-12 mb-4"},[r("v-select",{attrs:{multiple:"",label:"name",required:"",reduce:function(t){return t.id},options:t.CATEGORIES},model:{value:t.categories,callback:function(e){t.categories=e},expression:"categories"}})],1),t._v(" "),r("button",{staticClass:"btn btn-info btn-lg btn-block",attrs:{type:"button"},on:{click:t.submitEdit}},[t._v("\n                  Save\n                ")])],2)])])]:[t._m(2)]],2)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header border-0"},[e("h3",{staticClass:"mb-0"},[this._v("Products table")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"btn btn-sm btn-icon-only text-light",attrs:{href:"#",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fas fa-ellipsis-v"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("small",{staticClass:"mb-0 text-gray"},[this._v("\n              This is the edit product section, please select which product to\n              edit from the dropdown on each product's record\n            ")])])}],!1,null,"79892888",null);e.default=component.exports;installComponents(component,{AdminPagination:r(280).default,Form:r(105).default})}}]);