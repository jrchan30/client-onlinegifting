(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{487:function(t,e,r){"use strict";r.r(e);r(62),r(27),r(28),r(15),r(53);var n=r(29),o=(r(12),r(4)),c=r(38),l=r(74),d=r(291);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={layout:"admin",middleware:["auth","admin-only"],fetch:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.GET_CATEGORIES();case 2:return e.next=4,t.GET_ALL_PRODUCTS();case 4:case"end":return e.stop()}}),e)})))()},data:function(){return{form:{bundle_name:"",description:"",image:null,colour:"",products:[],categories:[]},editor:null,loading:!1}},computed:f({},Object(c.c)({CATEGORIES:"categories/CATEGORIES",SUB_CATEGORIES:"categories/SUB_CATEGORIES",ALL_PRODUCTS:"products/ALL_PRODUCTS"})),beforeDestroy:function(){this.editor&&this.editor.destroy()},beforeMount:function(){var t=this;this.editor=new l.a({content:"<p>Product description goes here!</p>",extensions:[new d.b,new d.f,new d.g,new d.e,new d.a,new d.d,new d.h,new d.i,new d.c],onUpdate:function(e){var r=e.getJSON,n=e.getHTML;t.json=r(),t.html=n(),t.form.description=t.html}})},methods:f(f({},Object(c.b)({GET_CATEGORIES:"categories/GET_CATEGORIES",GET_ALL_PRODUCTS:"products/GET_ALL_PRODUCTS"})),{},{closeForm:function(){Object.assign(this.$data,this.$options.data())},onChange:function(){var t=this.$refs.pictureInput.file;t?this.form.image=t:alert("Old browser (not supported). Chrome latest updated browser is suggested")},onRemoved:function(){this.image=""},submit:function(){var t=this;this.errors={},this.$swal({title:"Are you sure?",text:"Please recheck before inserting",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, insert it!"}).then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r){var form,n,o,c,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isConfirmed){e.next=23;break}for(o in t.loading=!0,form={name:t.form.bundle_name,description:t.form.description,colour:t.form.colour},n=new FormData,form)n.append(o,form[o]);for(c in t.form.categories)n.append("categories[]",t.form.categories[c]);for(m in t.form.products)n.append("products[]",t.form.products[m]);return n.append("image",t.form.image),e.prev=8,e.next=11,t.$axios.$post("/bundles",n);case 11:t.$swal("Inserted!","Bundle has been inserted.","success"),t.editor.destroy(),t.closeForm(),t.editor=new l.a({content:"<p>Product description goes here!</p>",extensions:[new d.b,new d.f,new d.g,new d.e,new d.a,new d.d,new d.h,new d.i,new d.c],onUpdate:function(e){var r=e.getJSON,n=e.getHTML;t.json=r(),t.html=n(),t.description=t.html}}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),t.$swal({icon:"error",title:"Oops...",text:null===(f=e.t0.response.data)||void 0===f?void 0:f.message});case 20:return e.prev=20,t.loading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[8,17,20,23]])})));return function(t){return e.apply(this,arguments)}}())}})},C=r(8),component=Object(C.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.submit(e)},keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-6"},[r("div",{staticClass:"card-wrapper"},[r("div",{staticClass:"card"},[t._m(0),t._v(" "),r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"form-group"},[r("div",{staticClass:"input-group input-group-merge"},[t._m(1),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.bundle_name,expression:"form.bundle_name"}],staticClass:"form-control",attrs:{placeholder:"Bundle name",type:"text"},domProps:{value:t.form.bundle_name},on:{input:function(e){e.target.composing||t.$set(t.form,"bundle_name",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"form-group"},[r("div",{staticClass:"input-group input-group-merge"},[t._m(2),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.colour,expression:"form.colour"}],staticClass:"form-control",attrs:{placeholder:"Colour",type:"text"},domProps:{value:t.form.colour},on:{input:function(e){e.target.composing||t.$set(t.form,"colour",e.target.value)}}})])])])])])])])]),t._v(" "),r("div",{staticClass:"col-lg-6"},[r("div",{staticClass:"card-wrapper"},[r("div",{staticClass:"card"},[t._m(3),t._v(" "),r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-6 col-md-4 mt-2"},[r("picture-input",{ref:"pictureInput",attrs:{width:"130",height:"130",size:"3",margin:"16","z-index":10,"button-class":"btn mb-0 mt-1","remove-button-class":"btn my-0",radius:"5",removable:!0,"custom-strings":{upload:"<h1>Bummer!</h1>",drag:"Drag an image",remove:"Remove",change:"Change"}},on:{change:function(e){return t.onChange()}}})],1)])])])])]),t._v(" "),t.$fetchState.pending?t._e():r("div",{staticClass:"col-lg-6"},[r("div",{staticClass:"card-wrapper"},[r("div",{staticClass:"card"},[t._m(4),t._v(" "),r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("v-select",{staticStyle:{},attrs:{multiple:"",label:"name",required:"",reduce:function(t){return t.id},options:t.SUB_CATEGORIES},model:{value:t.form.categories,callback:function(e){t.$set(t.form,"categories",e)},expression:"form.categories"}})],1)])])])])]),t._v(" "),t.$fetchState.pending?t._e():r("div",{staticClass:"col-lg-6"},[r("div",{staticClass:"card-wrapper"},[r("div",{staticClass:"card"},[t._m(5),t._v(" "),r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("v-select",{staticStyle:{},attrs:{multiple:"",label:"name",required:"",reduce:function(t){return t.id},options:t.ALL_PRODUCTS},model:{value:t.form.products,callback:function(e){t.$set(t.form,"products",e)},expression:"form.products"}})],1)])])])])]),t._v(" "),r("div",{staticClass:"col-lg-12"},[r("div",{staticClass:"card-wrapper"},[r("div",{staticClass:"card"},[t._m(6),t._v(" "),r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.commands,o=e.isActive;return[r("div",[r("button",{staticClass:"btn px-1 py-0",class:{"is-active":o.bold()},attrs:{type:"button"},on:{click:n.bold}},[r("i",{staticClass:"fas fa-bold"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",class:{"is-active":o.italic()},attrs:{type:"button"},on:{click:n.italic}},[r("i",{staticClass:"fas fa-italic"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",class:{"is-active":o.strike()},attrs:{type:"button"},on:{click:n.strike}},[r("i",{staticClass:"fas fa-strikethrough"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",class:{"is-active":o.underline()},on:{click:n.underline}},[r("i",{staticClass:"fas fa-underline"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",class:{"is-active":o.bullet_list()},attrs:{type:"button"},on:{click:n.bullet_list}},[r("i",{staticClass:"fas fa-list-ul"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",class:{"is-active":o.ordered_list()},attrs:{type:"button"},on:{click:n.ordered_list}},[r("i",{staticClass:"fas fa-list-ol"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",attrs:{type:"button"},on:{click:n.undo}},[r("i",{staticClass:"fas fa-undo-alt"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",attrs:{type:"button"},on:{click:n.redo}},[r("i",{staticClass:"fas fa-redo"})])])]}}])}),t._v(" "),r("div",{staticClass:"border-danger p-2"},[r("editor-content",{staticClass:"editor__content border-1",attrs:{editor:t.editor}}),t._v(" "),r("input",{attrs:{type:"hidden",name:"content"},domProps:{value:t.editor}})],1)],1)])])])])])]),t._v(" "),r("button",{staticClass:"btn btn-info btn-lg btn-block",attrs:{type:"submit",disabled:t.loading}},[t.loading?r("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n      Submit\n    ")])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h3",{staticClass:"mb-0"},[this._v("Input bundle")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"fas fa-parachute-box"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"fas fa-palette"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h3",{staticClass:"mb-0"},[this._v("Images")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header col-12"},[e("h3",{staticClass:"mb-0"},[this._v("Categories")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h3",{staticClass:"mb-0"},[this._v("Products to be included")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h3",{staticClass:"mb-0"},[this._v("Bundle description")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Form:r(105).default})}}]);