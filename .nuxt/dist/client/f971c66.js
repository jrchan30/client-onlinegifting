(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{276:function(t,e,r){"use strict";r.r(e);r(12);var n=r(4),o={name:"AdminPagination",props:{storeAction:{type:String,default:""},storeGetter:{type:String,default:""}},data:function(){return{current_page:1,last_page:"",loading:!1}},computed:{currentObject:function(){return this.$store.getters["".concat(this.storeGetter)]}},methods:{changePage:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!0!==e.loading){r.next=2;break}return r.abrupt("return",!1);case 2:e.loading=!0,r.t0=t,r.next="next"===r.t0?6:"prev"===r.t0?8:"first"===r.t0?10:"last"===r.t0?12:14;break;case 6:return e.current_page++,r.abrupt("break",15);case 8:return e.current_page--,r.abrupt("break",15);case 10:return e.current_page=1,r.abrupt("break",15);case 12:return e.current_page=e.currentObject.meta.last_page,r.abrupt("break",15);case 14:return r.abrupt("break",15);case 15:return r.next=17,e.$store.dispatch(e.storeAction,e.current_page);case 17:setTimeout((function(){e.loading=!1}),2e3);case 18:case"end":return r.stop()}}),r)})))()}}},c=r(8),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.currentObject.meta?r("nav",{attrs:{"aria-label":"..."}},[r("ul",{staticClass:"pagination justify-content-end mb-0"},[r("li",{staticClass:"page-item",class:{disabled:!t.currentObject.links.prev}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)",tabindex:"-1"},on:{click:function(e){return t.changePage("prev")}}},[r("i",{staticClass:"fas fa-angle-left"}),t._v(" "),r("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._v(" "),1!==t.currentObject.meta.current_page?r("li",{staticClass:"page-item",on:{click:function(e){return t.changePage("first")}}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"}},[t._v("1")])]):t._e(),t._v(" "),r("li",{staticClass:"page-item active",staticStyle:{"pointer-events":"none"}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)",disabled:""}},[t._v(t._s(t.current_page)+" "),r("span",{staticClass:"sr-only"},[t._v("(current)")])])]),t._v(" "),t.currentObject.meta.last_page!==t.current_page?r("li",{staticClass:"page-item",on:{click:function(e){return t.changePage("last")}}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.currentObject.meta.last_page))])]):t._e(),t._v(" "),r("li",{staticClass:"page-item",class:{disabled:!t.currentObject.links.next}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.changePage("next")}}},[r("i",{staticClass:"fas fa-angle-right"}),t._v(" "),r("span",{staticClass:"sr-only"},[t._v("Next")])])])])]):t._e()}),[],!1,null,null,null);e.default=component.exports},426:function(t,e,r){var content=r(445);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(29).default)("5ea8887c",content,!0,{sourceMap:!1})},444:function(t,e,r){"use strict";r(426)},445:function(t,e,r){(e=r(28)(!1)).push([t.i,".item-image[data-v-915ce86c],.item-image-bottom[data-v-915ce86c]{border-radius:10px;cursor:pointer}.item-image-bottom[data-v-915ce86c]{transition:transform .4s}.item-image-bottom[data-v-915ce86c]:hover{transform:scale(1.1)}",""]),t.exports=e},478:function(t,e,r){"use strict";r.r(e);r(62),r(25),r(26),r(14),r(53),r(18);var n=r(27),o=(r(12),r(4)),c=r(38),l=r(74),d=r(287);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={layout:"admin",middleware:["auth","admin-only"],fetch:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.GET_BUNDLES();case 2:return e.next=4,t.GET_CATEGORIES();case 4:return e.next=6,t.GET_ALL_PRODUCTS();case 6:case"end":return e.stop()}}),e)})))()},data:function(){return{isEdit:!1,currentBundleName:"",form:{bundle_name:"",description:"",image:null,colour:"",products:[],categories:[]},editor:null,filter:{search:"",orderBy:"created_at",orderDir:"desc"},isHiddenBundles:!1,loading:!1,errors:{}}},computed:f({},Object(c.c)({BUNDLES:"bundles/BUNDLES",CATEGORIES:"categories/CATEGORIES",ALL_PRODUCTS:"products/ALL_PRODUCTS"})),beforeDestroy:function(){this.editor&&this.editor.destroy()},methods:f(f(f({},Object(c.b)({GET_BUNDLES:"bundles/GET_BUNDLES",GET_CATEGORIES:"categories/GET_CATEGORIES",GET_ALL_PRODUCTS:"products/GET_ALL_PRODUCTS",GET_HIDDEN_BUNDLES:"bundles/GET_HIDDEN_BUNDLES"})),Object(c.d)({SET_FILTER:"bundles/SET_FILTER"})),{},{onChange:function(){var t=this.$refs.pictureInput.file;t?this.form.image=t:alert("Old browser (not supported). Chrome latest updated browser is suggested")},settingFilter:function(t){switch(t){case"id":if("id"!==this.filter.orderBy)this.filter.orderDir="desc";else{var e="desc"===this.filter.orderDir?"asc":"desc";this.filter.orderDir=e}this.filter.orderBy="id";break;case"name":if("name"!==this.filter.orderBy)this.filter.orderDir="desc";else{var r="desc"===this.filter.orderDir?"asc":"desc";this.filter.orderDir=r}this.filter.orderBy="name"}this.SET_FILTER(this.filter),this.isHiddenBundles?this.GET_HIDDEN_BUNDLES():this.GET_BUNDLES()},expandImage:function(t){this.$swal({showCloseButton:!0,imageUrl:t,width:1e3,showConfirmButton:!1,imageWidth:"100%",imageAlt:"Image Not Available"})},toggleEdit:function(t){var e=this;this.editor&&this.editor.destroy(),this.closeForm();var r=JSON.parse(JSON.stringify(t));this.isEdit=!0,this.form.bundle_name=r.name,this.form.image=r.detail.image,this.currentBundleName=r.name,this.form.colour=r.detail.colour,this.form.description=r.description,this.editor=new l.a({content:this.form.description,extensions:[new d.b,new d.f,new d.g,new d.e,new d.a,new d.d,new d.h,new d.i,new d.c],onUpdate:function(t){var r=t.getJSON,n=t.getHTML;e.json=r(),e.html=n(),e.form.description=e.html}}),r.detail.categories.map((function(t){return e.form.categories.push(t.id)})),r.products.map((function(t){return e.form.products.push(t.id)})),document.getElementById("edit").scrollIntoView()},closeForm:function(){this.isEdit=!1,Object.assign(this.$data,this.$options.data())},getBundles:function(){this.isHiddenBundles=!1,this.GET_BUNDLES()},getHiddenBundles:function(){this.isHiddenBundles=!0,this.GET_HIDDEN_BUNDLES()},hideBundle:function(t){var e=this;this.loading=!0,this.$swal({title:"Are you sure?",text:"Bundle will be hidden from customers",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, hide it!"}).then(function(){var r=Object(o.a)(regeneratorRuntime.mark((function r(n){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.isConfirmed){r.next=14;break}return r.prev=1,r.next=4,e.$axios.$delete("/bundles/".concat(t));case 4:e.$swal("Hid!","Bundle is now hidden.","success"),e.GET_BUNDLES(),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),e.$swal({icon:"error",title:"Oops...",text:null===(o=r.t0.response.data)||void 0===o?void 0:o.message});case 11:return r.prev=11,e.loading=!1,r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[1,8,11,14]])})));return function(t){return r.apply(this,arguments)}}())},restoreBundle:function(t){var e=this;this.loading=!0,this.$swal({title:"Are you sure?",text:"Bundle will be visible to customers",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, restore it!"}).then(function(){var r=Object(o.a)(regeneratorRuntime.mark((function r(n){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.isConfirmed){r.next=14;break}return r.prev=1,r.next=4,e.$axios.$post("/restore-bundle/".concat(t));case 4:e.$swal("Restored!","Bundle is restored.","success"),e.GET_HIDDEN_BUNDLES(),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),e.$swal({icon:"error",title:"Oops...",text:null===(o=r.t0.response.data)||void 0===o?void 0:o.message});case 11:return r.prev=11,e.loading=!1,r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[1,8,11,14]])})));return function(t){return r.apply(this,arguments)}}())},submitEdit:function(){this.$swal({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}),this.closeForm(),console.log("submit edit button clicked")}})},_=(r(444),r(8)),component=Object(_.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"card"},[t._m(0),t._v(" "),r("div",{staticClass:"nav-wrapper px-2 ml-3"},[r("ul",{staticClass:"nav nav-pills flex-column flex-md-row",attrs:{id:"tabs-icons-text",role:"tablist"}},[r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link mb-sm-3 mb-md-0 active",attrs:{id:"tabs-icons-text-1-tab","data-toggle":"tab",href:"#tabs-icons-text-1",role:"tab","aria-controls":"tabs-icons-text-1","aria-selected":"true"},on:{click:function(e){return t.getBundles()}}},[r("i",{staticClass:"fas fa-boxes mr-2"}),t._v("Bundles")])]),t._v(" "),r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link mb-sm-3 mb-md-0",attrs:{id:"tabs-icons-text-2-tab","data-toggle":"tab",href:"#tabs-icons-text-2",role:"tab","aria-controls":"tabs-icons-text-2","aria-selected":"false"},on:{click:function(e){return t.getHiddenBundles()}}},[r("i",{staticClass:"fas fa-trash-alt mr-2"}),t._v("Hidden Bundles")])])])]),t._v(" "),r("div",{staticClass:"table-responsive",attrs:{"data-toggle":"list","data-list-values":'["id", "name", "price", "stock", "weight"]'}},[r("table",{staticClass:"table align-items-center table-flush"},[r("thead",{staticClass:"thead-light"},[r("tr",[r("th",{staticClass:"sort",attrs:{scope:"col","data-sort":"id"},on:{click:function(e){return t.settingFilter("id")}}},[t._v("\n                Id\n              ")]),t._v(" "),r("th",{staticClass:"sort",attrs:{scope:"col","data-sort":"name"},on:{click:function(e){return t.settingFilter("name")}}},[t._v("\n                Bundle Name\n              ")]),t._v(" "),r("th",{staticClass:"sort",attrs:{scope:"col"}},[t._v("Price")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Image")]),t._v(" "),r("th",{staticClass:"sort",attrs:{scope:"col"}},[t._v("Rating")]),t._v(" "),r("th",{staticClass:"sort",attrs:{scope:"col"}},[t._v("Likes")]),t._v(" "),r("th",{attrs:{scope:"col"}})])]),t._v(" "),r("tbody",{staticClass:"list"},t._l(t.BUNDLES.data,(function(e){return r("tr",{key:e.id},[r("td",{staticClass:"id"},[t._v(t._s(e.id))]),t._v(" "),r("th",{staticClass:"name"},[r("span",{staticClass:"text-capitalize"},[t._v(t._s(e.name))])]),t._v(" "),r("td",{staticClass:"price"},[t._v(t._s(e.price)+" (IDR)")]),t._v(" "),r("td",[r("img",{staticClass:"item-image",attrs:{alt:"Image placeholder",src:e.main_image,width:"80px"},on:{click:function(r){return t.expandImage(""+e.main_image)}}})]),t._v(" "),r("td",{staticClass:"rating"},[null==e.avg_rating?r("span",[t._v("Not rated")]):t._e(),t._v(t._s(e.avg_rating)+"\n              ")]),t._v(" "),r("td",{staticClass:"likes"},[t._v("\n                "+t._s(e.likes_count)+"\n              ")]),t._v(" "),r("td",{staticClass:"text-right"},[r("div",{staticClass:"dropdown"},[t._m(1,!0),t._v(" "),r("div",{staticClass:"dropdown-menu dropdown-menu-right dropdown-menu-arrow"},[t.isHiddenBundles?[r("button",{staticClass:"dropdown-item",on:{click:function(r){return t.restoreBundle(e.id)}}},[t._v("\n                        Restore\n                      ")])]:[r("button",{staticClass:"dropdown-item",on:{click:function(r){return t.toggleEdit(e)}}},[t._v("\n                        Edit\n                      ")]),t._v(" "),r("button",{staticClass:"dropdown-item",on:{click:function(r){return t.hideBundle(e.id)}}},[t._v("\n                        Hide\n                      ")])]],2)])])])})),0)])]),t._v(" "),r("div",{staticClass:"card-footer py-4"},[r("AdminPagination",{attrs:{"store-action":"bundles/GET_BUNDLES","store-getter":"bundles/BUNDLES"}})],1)]),t._v(" "),r("div",{staticClass:"card",attrs:{id:"edit"}},[r("div",{staticClass:"card-header border-0"},[t.isEdit?[r("h3",{staticClass:"mb-0 text-capitalize"},[t._v("\n            Edit Bundle ("+t._s(t.currentBundleName)+")\n            "),r("button",{staticClass:"btn p-0 float-right fas fa-times",on:{click:t.closeForm}})]),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.submitEdit(e)},keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}}},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-3"},[r("picture-input",{ref:"pictureInput",attrs:{width:"130",height:"130",size:"10",margin:"16","z-index":10,"button-class":"btn btn-sm",radius:"5",prefill:t.form.image.url,"custom-strings":{upload:"<h1>Bummer!</h1>",drag:"Drag an image"}},on:{change:function(e){return t.onChange(t.form.image.id)}}})],1)]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[t._v("Name")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.bundle_name,expression:"form.bundle_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.bundle_name},on:{input:function(e){e.target.composing||t.$set(t.form,"bundle_name",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[t._v("Colour")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.colour,expression:"form.colour"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.colour},on:{input:function(e){e.target.composing||t.$set(t.form,"colour",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[t._v("Categories")]),t._v(" "),r("v-select",{staticStyle:{},attrs:{multiple:"",label:"name",required:"",reduce:function(t){return t.id},options:t.CATEGORIES},model:{value:t.form.categories,callback:function(e){t.$set(t.form,"categories",e)},expression:"form.categories"}})],1)]),t._v(" "),r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[t._v("Products included")]),t._v(" "),r("v-select",{staticStyle:{},attrs:{multiple:"",label:"name",required:"",reduce:function(t){return t.id},options:t.ALL_PRODUCTS},model:{value:t.form.products,callback:function(e){t.$set(t.form,"products",e)},expression:"form.products"}})],1)]),t._v(" "),r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"card-wrapper"},[r("div",{staticClass:"card"},[t._m(2),t._v(" "),r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.commands,o=e.isActive;return[r("div",[r("button",{staticClass:"btn px-1 py-0",class:{"is-active":o.bold()},attrs:{type:"button"},on:{click:n.bold}},[r("i",{staticClass:"fas fa-bold"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",class:{"is-active":o.italic()},attrs:{type:"button"},on:{click:n.italic}},[r("i",{staticClass:"fas fa-italic"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",class:{"is-active":o.strike()},attrs:{type:"button"},on:{click:n.strike}},[r("i",{staticClass:"fas fa-strikethrough"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",class:{"is-active":o.underline()},on:{click:n.underline}},[r("i",{staticClass:"fas fa-underline"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",class:{"is-active":o.bullet_list()},attrs:{type:"button"},on:{click:n.bullet_list}},[r("i",{staticClass:"fas fa-list-ul"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",class:{"is-active":o.ordered_list()},attrs:{type:"button"},on:{click:n.ordered_list}},[r("i",{staticClass:"fas fa-list-ol"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",attrs:{type:"button"},on:{click:n.undo}},[r("i",{staticClass:"fas fa-undo-alt"})]),t._v(" "),r("button",{staticClass:"btn px-1 py-0",attrs:{type:"button"},on:{click:n.redo}},[r("i",{staticClass:"fas fa-redo"})])])]}}],null,!1,341947592)}),t._v(" "),r("div",{staticClass:"border-danger p-2"},[r("editor-content",{staticClass:"editor__content border-1",attrs:{editor:t.editor}}),t._v(" "),r("input",{attrs:{type:"hidden",name:"content"},domProps:{value:t.editor}})],1)],1)])])])])])])])])]:[t._m(3)]],2)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header border-0"},[e("h3",{staticClass:"mb-0"},[this._v("Bundles table")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"btn btn-sm btn-icon-only text-light",attrs:{href:"#",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fas fa-ellipsis-v"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h3",{staticClass:"mb-0"},[this._v("Bundle description")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("small",{staticClass:"mb-0 text-gray"},[this._v("\n              This is the edit bundle section, please select which bundle to\n              edit from the dropdown on each bundle's record\n            ")])])}],!1,null,"915ce86c",null);e.default=component.exports;installComponents(component,{AdminPagination:r(276).default,Form:r(105).default})}}]);